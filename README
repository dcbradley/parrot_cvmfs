Author: Dan Bradley <dan@hep.wisc.edu>

This repository is for integration work required to support access to
CVMFS in parrot.  All modifications and additions in this repository
made to code in cvmfs are subject to the license in cvmfs/COPYING
(BSD).  All modifications and additions in this repository made to
code in cctools are subject to the license in cctools/COPYING (GPLv2).

The sourcecode tarballs for CVMFS and parrot were downloaded and
checked into the 'upstream' branch.  The following versions are
currently used:

cvmfs trunk r3081
cctools trunk r1660

To see the development that has been done, compare the master
branch to the upstream branch:

git diff upstream..master -- cctools
git diff upstream..master -- cvmfs

To build:

cd cvmfs

cd jemalloc
tar tjf jemalloc-linux-20080828a.tar.bz2
mv jemalloc-2.2.1 src
patch -i jemalloc-2.2.1-64bit_literals.patch
cd ..

cd libcurl
tar xvzf curl-7.21.3.tar.gz
mv curl-7.21.3/* src/
cd ..

cd libfuse
tar xvzf fuse-2.8.4.tar.gz
mv fuse-2.8.4/* src/
patch -i fuse-drainout.patch
cd ..

autoconf
./configure --disable-server --enable-sqlite3-builtin --enable-libcurl-builtin
make

cd ../cctools
./configure --without-system-sand --without-system-allpairs --without-system-wavefront --without-system-makeflow --with-cvmfs-path `pwd`/../cvmfs
make


To test:

. test/setup.sh
cd cctools/parrot/src
./parrot_run ls -l /cvmfs/cms.hep.wisc.edu
./parrot_run ls -l /cvmfs/cms.cern.ch
